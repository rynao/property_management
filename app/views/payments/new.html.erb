<%= render 'layouts/header' %>

<div class='container mt-5'>
  <div class='card shadow px-5 py-3 d-flex flex-nowrap'>
    <h3 class='mx-auto mt-3'>支払い情報登録</h3>
      <table class="table">
        <thead>
          <tr>
            <th>
              <input type='button' id='check_all' value='選択/解除' class=''>
            </th>
            <th>物件名称</th>
            <th>部屋</th>
            <th>金額</th>
            <th>未納チェック</th>
          </tr>
        </thead>
        <tbody>
          <%= form_with(model:@form, url: payments_path, method: :post, local: true) do |payments| %>
            <% @contracts.each do |f| %>
              <%= payments.fields_for :payments do |p|%>
                <tr>
                  <td><input type='checkbox' class='check form-check-input' value=<%= f.id %>></td>
                  <td><%= p.select :property_id, { f.property.building => f.property_id },{selected: f.property_id},{ class: 'form-control', required: true, readonly: true } %></td>
                  <td><%= p.select :room_id, { f.room.name => f.room_id },{selected: f.room_id},{ class: 'form-control', required: true, readonly: true } %></td>
                  <td><%= p.text_field :amounts, value: f.rent, class: 'form-control', required: true %></td>
                  <td><%= p.check_box :not_paid, { class: 'form-check-input'} %></td>
                </tr>
              <% end %>
            <% end %>
            <div class='row my-3'>
              <%= payments.submit "登録" ,class:'d-block mx-auto col-md-4 btn btn-primary' %>
              <div class=' mt-3 d-flex justify-content-center'>
                <%=link_to 'もどる', payments_path, class:'' %>
              </div>
            </div>
          <% end %>
        </tbody>
      </table>
  </div>
</div>